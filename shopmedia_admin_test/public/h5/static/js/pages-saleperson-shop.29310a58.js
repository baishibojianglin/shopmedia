(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-saleperson-shop"],{3308:function(e,t,i){"use strict";var n=i("bf8a"),a=i.n(n);a.a},"39fd":function(e,t,i){var n=i("24fb");t=n(!1),t.push([e.i,".contain-logo[data-v-2497d37a]{margin-top:50px;margin-bottom:20px;text-align:center}.logo[data-v-2497d37a]{height:140px}.input-line-height[data-v-2497d37a]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;line-height:50px;border-bottom:1px solid #ececec;font-size:15px}.input-line-height-1[data-v-2497d37a]{-webkit-box-flex:1;-webkit-flex:1;flex:1;line-height:50px;font-size:15px;padding-left:5px}.input-line-height-2[data-v-2497d37a]{-webkit-box-flex:3;-webkit-flex:3;flex:3;font-size:15px;text-align:left}.login-button[data-v-2497d37a]{background-color:#409eff;color:#fff;margin-top:20px}.bottom-con[data-v-2497d37a]{display:-webkit-box;display:-webkit-flex;display:flex;margin-top:20px;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;font-size:14px}.bottom-con-1[data-v-2497d37a]{padding:0 8px}.location-text[data-v-2497d37a]{padding:5px 0;line-height:40px;-webkit-flex-wrap:wrap;flex-wrap:wrap}.navcon[data-v-2497d37a]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-flow:row wrap;flex-flow:row wrap;-webkit-box-pack:left;-webkit-justify-content:left;justify-content:left;text-align:center}.navcon-item[data-v-2497d37a]{-webkit-box-flex:0;-webkit-flex:0 0 33.3%;flex:0 0 33.3%;padding:10px 0;position:relative}.iconposition[data-v-2497d37a]{position:absolute;right:-5px;top:-5px}.line-blue[data-v-2497d37a]{font-size:18px;margin-left:5px}",""]),e.exports=t},"438f":function(e,t,i){"use strict";var n,a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view",{staticClass:"uni-padding-wrap"},[i("v-uni-view",[i("v-uni-view",{staticClass:"input-line-height"},[i("v-uni-view",{staticClass:"input-line-height-1"},[e._v("电话"),i("v-uni-text",{staticClass:"main-color line-blue"},[e._v("|")])],1),i("v-uni-input",{staticClass:"input-line-height-2",attrs:{type:"text",placeholder:"联系手机号码"},model:{value:e.phone,callback:function(t){e.phone=t},expression:"phone"}})],1),i("v-uni-view",{staticClass:"input-line-height"},[i("v-uni-view",{staticClass:"input-line-height-1"},[e._v("店名"),i("v-uni-text",{staticClass:"main-color line-blue"},[e._v("|")])],1),i("v-uni-input",{staticClass:"input-line-height-2",attrs:{type:"text"},model:{value:e.shop_name,callback:function(t){e.shop_name=t},expression:"shop_name"}})],1),i("v-uni-view",{staticClass:"input-line-height"},[i("v-uni-view",{staticClass:"input-line-height-1"},[e._v("类型"),i("v-uni-text",{staticClass:"main-color line-blue"},[e._v("|")])],1),i("v-uni-picker",{staticClass:"input-line-height-2",attrs:{value:e.shopCateIndex,range:e.shopCateList,"range-key":"cate_name"},on:{change:function(t){arguments[0]=t=e.$handleEvent(t),e.bindShopCatePickerChange.apply(void 0,arguments)}}},[i("v-uni-view",{staticStyle:{"font-size":"15px"}},[e._v(e._s(e.shopCateList[e.shopCateIndex].cate_name))]),i("v-uni-input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{type:"text"},model:{value:e.cate,callback:function(t){e.cate=t},expression:"cate"}})],1)],1),i("v-uni-view",{staticClass:"input-line-height"},[i("v-uni-view",{staticClass:"input-line-height-1"},[e._v("环境"),i("v-uni-text",{staticClass:"main-color line-blue"},[e._v("|")])],1),i("v-uni-picker",{staticClass:"input-line-height-2",attrs:{value:e.environmentindex,range:e.environmentlist,"range-key":"en_name"},on:{change:function(t){arguments[0]=t=e.$handleEvent(t),e.bindShopHjPickerChange.apply(void 0,arguments)}}},[i("v-uni-view",{staticStyle:{"font-size":"15px"}},[e._v(e._s(e.environmentlist[e.environmentindex].en_name))]),i("v-uni-input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{type:"text"},model:{value:e.environment,callback:function(t){e.environment=t},expression:"environment"}})],1)],1),i("v-uni-view",{staticClass:"input-line-height"},[i("v-uni-view",{staticClass:"input-line-height-1"},[e._v("面积"),i("v-uni-text",{staticClass:"main-color line-blue"},[e._v("|")])],1),i("v-uni-input",{staticClass:"input-line-height-2",attrs:{type:"number"},model:{value:e.shop_area,callback:function(t){e.shop_area=t},expression:"shop_area"}}),e._v("㎡")],1),i("v-uni-view",{staticClass:"input-line-height"},[i("v-uni-view",{staticClass:"input-line-height-1"},[e._v("位置"),i("v-uni-text",{staticClass:"main-color line-blue"},[e._v("|")])],1),i("v-uni-view",{staticClass:"input-line-height-2"},[i("v-uni-button",{directives:[{name:"show",rawName:"v-show",value:!e.address,expression:"!address"}],staticStyle:{"font-size":"14px","margin-top":"7px"},attrs:{size:"mini"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.getlocation()}}},[e._v("点击获取")]),i("v-uni-input",{directives:[{name:"show",rawName:"v-show",value:e.address,expression:"address"}],staticStyle:{"font-size":"15px"},attrs:{type:"text"},model:{value:e.address,callback:function(t){e.address=t},expression:"address"}})],1)],1),i("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticClass:"input-line-height"},[i("v-uni-view",{staticClass:"input-line-height-1"},[e._v("经度"),i("v-uni-text",{staticClass:"main-color line-blue"},[e._v("|")])],1),i("v-uni-input",{staticClass:"input-line-height-2",attrs:{type:"number"},model:{value:e.longitude,callback:function(t){e.longitude=t},expression:"longitude"}})],1),i("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticClass:"input-line-height"},[i("v-uni-view",{staticClass:"input-line-height-1"},[e._v("纬度"),i("v-uni-text",{staticClass:"main-color line-blue"},[e._v("|")])],1),i("v-uni-input",{staticClass:"input-line-height-2",attrs:{type:"number"},model:{value:e.latitude,callback:function(t){e.latitude=t},expression:"latitude"}})],1),i("v-uni-view",{staticClass:"input-line-height"},[i("v-uni-view",{staticClass:"input-line-height-1"},[e._v("实景"),i("v-uni-text",{staticClass:"main-color line-blue"},[e._v("|")])],1),i("v-uni-view",{staticClass:"input-line-height-2"},[i("v-uni-button",{staticStyle:{"margin-top":"7px","font-size":"14px"},attrs:{size:"mini"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.takePhoto.apply(void 0,arguments)}}},[e._v("上传照片")])],1)],1),i("v-uni-view",{staticClass:"navcon"},e._l(e.imagelist,(function(t,n){return i("v-uni-view",{key:n,staticClass:"navcon-item"},[i("v-uni-image",{staticStyle:{width:"95%",height:"100px"},attrs:{src:t}}),i("v-uni-text",{staticClass:"iconposition icon",staticStyle:{color:"#E3E0D5"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.deleimg(n)}}},[e._v("")])],1)})),1)],1),i("v-uni-view",{staticClass:"input-line-height"},[i("v-uni-view",{staticClass:"input-line-height-1"},[e._v("描述"),i("v-uni-text",{staticClass:"main-color line-blue"},[e._v("|")])],1),i("v-uni-textarea",{staticClass:"input-line-height-2",staticStyle:{padding:"20upx 0"},attrs:{"auto-height":!0},model:{value:e.shop_describe,callback:function(t){e.shop_describe=t},expression:"shop_describe"}})],1),i("v-uni-view",[i("v-uni-button",{staticClass:"login-button",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.submitShopInfo.apply(void 0,arguments)}}},[e._v("上 传")])],1),i("v-uni-navigator",{staticClass:"input-line-height",staticStyle:{"border-bottom":"none"},attrs:{url:"./signshop"}},[i("v-uni-view",{staticClass:"input-line-height-1 text-center"},[i("v-uni-text",{staticClass:"main-color"},[e._v("《店铺合作协议》")])],1)],1)],1)},s=[];i.d(t,"b",(function(){return a})),i.d(t,"c",(function(){return s})),i.d(t,"a",(function(){return n}))},4883:function(e,t,i){"use strict";i.r(t);var n=i("c7ce"),a=i.n(n);for(var s in n)"default"!==s&&function(e){i.d(t,e,(function(){return n[e]}))}(s);t["default"]=a.a},"9d5c":function(e,t,i){"use strict";i.r(t);var n=i("438f"),a=i("4883");for(var s in a)"default"!==s&&function(e){i.d(t,e,(function(){return a[e]}))}(s);i("3308");var o,l=i("f0c5"),u=Object(l["a"])(a["default"],n["b"],n["c"],!1,null,"2497d37a",null,!1,n["a"],o);t["default"]=u.exports},bf8a:function(e,t,i){var n=i("39fd");"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var a=i("4f06").default;a("f258e084",n,!0,{sourceMap:!1,shadowMode:!1})},c7ce:function(e,t,i){"use strict";i("4160"),i("a434"),i("ac1f"),i("466d"),i("159b"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i("2f62"),a={components:{},data:function(){return{phone:"",shop_name:"",cate:"",environment:"",shop_area:"",address:"",longitude:"",latitude:"",image:[],imagelist:[],shop_describe:"",shopCateList:[{cate_id:"",cate_name:""}],shopCateIndex:0,environmentlist:[{en_id:"",en_name:""}],environmentindex:0}},computed:(0,n.mapState)(["forcedLogin","hasLogin","userInfo","commonheader"]),onLoad:function(){this.getShopCateList(),this.getShopEnvironment()},onNavigationBarButtonTap:function(e){this.$common.actionSheetTap()},methods:{getShopEnvironment:function(){var e=this;uni.request({url:this.$serverUrl+"api/shop_environment",header:{commonheader:this.commonheader,"access-user-token":this.userInfo.token},method:"GET",success:function(t){1==t.data.status&&t.data.data.forEach((function(t,i){e.$set(e.environmentlist,i,{en_id:t.en_id,en_name:t.en_name})}))},fail:function(e){uni.showToast({icon:"none",title:"请求异常"})}})},getShopCateList:function(){var e=this;uni.request({url:this.$serverUrl+"api/ad_cate_list",header:{commonheader:this.commonheader,"access-user-token":this.userInfo.token},method:"GET",success:function(t){1==t.data.status&&t.data.data.forEach((function(t,i){e.$set(e.shopCateList,i,{cate_id:t.cate_id,cate_name:t.cate_name})}))},fail:function(e){uni.showToast({icon:"none",title:"请求异常"})}})},submitShopInfo:function(){return""==this.phone?(uni.showToast({icon:"none",title:"请输入手机号码"}),!1):this.phone.match(/^(13[0-9]|14[0-9]|15[0-9]|16[0-9]|17[0-9]|18[0-9]|19[0-9])\d{8}$/)?(this.cate=this.shopCateList[this.shopCateIndex].cate_id,this.environment=this.environmentlist[this.environmentindex].en_id,void uni.request({url:this.$serverUrl+"api/shop",data:{user_id:this.userInfo.user_id,phone:this.phone,shop_name:this.shop_name,cate:this.cate,shop_area:this.shop_area,address:this.address,longitude:this.longitude,latitude:this.latitude,image:this.image,environment:this.environment,shop_describe:this.shop_describe},header:{commonheader:this.commonheader,"access-user-token":this.userInfo.token},method:"POST",success:function(e){201==e.statusCode&&1==e.data.status?uni.showModal({title:"提示",content:e.data.message,showCancel:!1,success:function(e){e.confirm&&uni.switchTab({url:"/pages/main/main"})}}):uni.showToast({icon:"none",title:e.data.message})},fail:function(e){uni.showToast({icon:"none",title:"请求异常"})}})):(uni.showToast({icon:"none",title:"手机号不正确"}),!1)},takePhoto:function(){var e=this;if(this.image.length>=3)return uni.showToast({icon:"none",title:"最多上传3张",duration:2e3}),!1;uni.chooseImage({count:3,sizeType:["compressed"],sourceType:["album","camera"],success:function(t){e.upload_image(t.tempFilePaths),t.tempFilePaths.forEach((function(t,i){e.imagelist.push(t)}))}})},upload_image:function(e){var t=this,i=this;e.forEach((function(e,n){uni.uploadFile({url:t.$serverUrl+"api/upload",filePath:e,header:{commonheader:t.commonheader,"access-user-token":t.userInfo.token},name:"file",success:function(e){i.image.push({name:JSON.parse(e.data).name,url:JSON.parse(e.data).url})}})}))},deleimg:function(e){var t=this;uni.request({url:this.$serverUrl+"api/deleimg",data:{name:this.image[e].name},header:{commonheader:this.commonheader,"access-user-token":this.userInfo.token},method:"PUT",success:function(i){t.image.splice(e,1),t.imagelist.splice(e,1)}})},getlocation:function(){var e=this;uni.chooseLocation({success:function(t){e.address=t.address,e.latitude=t.latitude,e.longitude=t.longitude}})},bindShopCatePickerChange:function(e){this.shopCateIndex=e.target.value},bindShopHjPickerChange:function(e){this.environmentindex=e.target.value}}};t.default=a}}]);